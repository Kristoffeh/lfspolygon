<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="Content-Language" content="en">

    <link rel="stylesheet" type="text/css" href="style.css" media="screen">

    <script src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="jquery.mousewheel.min.js" type="text/javascript"></script>

    <script src="jsDraw2DX_Uncompressed.js" type="text/javascript"></script>
    <script src="script.js" type="text/javascript"></script>
    <title>LFS polygons SVG</title>
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>

</head>

<body>

<div id="canvas" style="width:2560px;height:2560px;"></div>

<div id="work">
    <div class="control_block">
        <input type="button" value="Clear Canvas" onclick="clearCanvas();">
        <input type="button" value="Load" onclick="loadJson();">
        <input type="button" value="Export" onclick="Export();">
    </div>
</div>
<div id="work2">
    <div class="control_block">
        <label>Track:</label><br>
        <select onchange="track(this.value)">
            <option>AS</option>
            <option>AU</option>
            <option>BL</option>
            <option>FE</option>
            <option>KY</option>
            <option>SO</option>
            <option>WE</option>
            <option>RO</option>
        </select>
    </div>

    <div class="control_block">
        <label>Color:</label><br>
        <div id="color-picker-wrapper">
            <input type="color" value="#ff0000" id="color-picker">
        </div>
    </div>

    <div class="control_block">
        <label>Point&nbsp;edit type:</label><br>
        <select size="3" id="type">
            <option selected>add</option>
            <option>move</option>
            <option>delete</option>
        </select>
    </div>

    <div class="control_block">
        <label>Speed:</label><br>
        <input id="speed" placeholder="">
    </div>

    <div class="control_block">
        <label>Polygon Name:</label><br>
        <input id="name" placeholder="Polygon Name">
    </div>

    <div class="control_block">
        <label>Layers:</label><br>
        <select size="10" id="layer"></select><br>
        <button onclick="addLayer()">Add Layer</button><br>
        <button onclick="editLayer()">Edit Layer</button><br>
        <button onclick="deleteLayer()">Delete Layer</button>
    </div>

</div>

<!-- Hidden textarea for Load function -->
<textarea id="txt" style="display: none;"></textarea>

<!-- Export Modal -->
<div id="exportModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Exported Data</h2>
            <span class="modal-close">&times;</span>
        </div>
        <div class="modal-body">
            <textarea id="exportData" rows="15" cols="50"></textarea>
        </div>
        <div class="modal-footer">
            <button onclick="copyExportData()">Copy to Clipboard</button>
            <button onclick="closeExportModal()">Close</button>
        </div>
    </div>
</div>

<!-- Layer Name Modal (for Add/Edit) -->
<div id="layerNameModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2 id="layerNameModalTitle">Layer Name</h2>
            <span class="modal-close" onclick="closeLayerNameModal()">&times;</span>
        </div>
        <div class="modal-body">
            <input type="text" id="layerNameInput" placeholder="Enter layer name" style="width: 100%; padding: 10px; font-size: 14px; border: 1px solid #555; border-radius: 4px; background-color: #1a1a1a; color: #e0e0e0; box-sizing: border-box;">
            <div id="layerNameError" style="color: #ff6b6b; margin-top: 10px; display: none;"></div>
        </div>
        <div class="modal-footer">
            <button onclick="confirmLayerName()">OK</button>
            <button onclick="closeLayerNameModal()">Cancel</button>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteConfirmModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2>Delete Layer</h2>
            <span class="modal-close" onclick="closeDeleteConfirmModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p style="color: #e0e0e0; margin: 0;">Are you sure you want to delete this layer? This will remove all polygons and points in this layer.</p>
        </div>
        <div class="modal-footer">
            <button onclick="confirmDeleteLayer()" style="background-color: #d32f2f;">Delete</button>
            <button onclick="closeDeleteConfirmModal()">Cancel</button>
        </div>
    </div>
</div>

<div class="mouse_helper"></div>

<!-- Yandex.Metrika counter -->
<script type="text/javascript"> (function (d, w, c) {
    (w[c] = w[c] || []).push(function () {
        try {
            w.yaCounter24504719 = new Ya.Metrika({
                id: 24504719,
                clickmap: true,
                trackLinks: true,
                accurateTrackBounce: true,
                webvisor: true,
                trackHash: true
            });
        } catch (e) {
        }
    });
    var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () {
        n.parentNode.insertBefore(s, n);
    };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://mc.yandex.ru/metrika/watch.js";
    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else {
        f();
    }
})(document, window, "yandex_metrika_callbacks"); </script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/24504719" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript> <!-- /Yandex.Metrika counter -->
</body>

</html>
