<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="Content-Language" content="en">

    <link rel="stylesheet" type="text/css" href="style.css" media="screen">

    <script src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="jquery.mousewheel.min.js" type="text/javascript"></script>

    <script src="jsDraw2DX_Uncompressed.js" type="text/javascript"></script>
    <script src="script.js" type="text/javascript"></script>
    <title>LFS polygons SVG</title>
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>

</head>

<body>

<div id="canvas" style="width:2560px;height:2560px;"></div>

<div id="sidebar">
    <div class="sidebar-header">
        <h2>LFS Polygon Editor</h2>
    </div>
    
    <div class="sidebar-content">
        <div class="control-section">
            <h3 class="section-title">Actions</h3>
            <div class="button-group">
                <button class="btn btn-primary" onclick="Export();">
                    <span class="btn-icon">üì§</span> Export
                </button>
                <button class="btn btn-secondary" onclick="loadJson();">
                    <span class="btn-icon">üì•</span> Load
                </button>
                <button class="btn btn-danger" onclick="clearCanvas();">
                    <span class="btn-icon">üóëÔ∏è</span> Clear Canvas
                </button>
            </div>
        </div>

        <div class="control-section">
            <h3 class="section-title">Track</h3>
            <select class="form-select" onchange="track(this.value)">
                <option>AS</option>
                <option>AU</option>
                <option>BL</option>
                <option>FE</option>
                <option>KY</option>
                <option>SO</option>
                <option>WE</option>
                <option>RO</option>
            </select>
        </div>

        <div class="control-section">
            <h3 class="section-title">Edit Mode</h3>
            <div class="edit-mode-indicator-wrapper">
                <span class="edit-mode-indicator" id="editModeIndicator">Add</span>
                <span class="edit-mode-shortcut">(A/S/D/E)</span>
            </div>
            <select class="form-select" size="4" id="type">
                <option selected>add</option>
                <option>move</option>
                <option>delete</option>
                <option>none</option>
            </select>
        </div>

        <div class="control-section">
            <h3 class="section-title">Color</h3>
            <div id="color-picker-wrapper" class="color-picker-wrapper">
                <input type="color" value="#ff0000" id="color-picker">
                <span class="color-display" id="color-display">#ff0000</span>
            </div>
        </div>

        <div class="control-section">
            <h3 class="section-title">Layers</h3>
            <select class="form-select layer-select" size="8" id="layer"></select>
            <div class="button-group vertical">
                <button class="btn btn-success" onclick="addLayer()">
                    <span class="btn-icon">‚ûï</span> Add Layer
                </button>
                <button class="btn btn-warning" onclick="editLayer()">
                    <span class="btn-icon">‚úèÔ∏è</span> Edit Layer
                </button>
                <button class="btn btn-primary" onclick="openPropertiesModal()">
                    <span class="btn-icon">‚öôÔ∏è</span> Properties
                </button>
                <button class="btn btn-danger" onclick="deleteLayer()">
                    <span class="btn-icon">üóëÔ∏è</span> Delete Layer
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Hidden textarea for Load function -->
<textarea id="txt" style="display: none;"></textarea>

<!-- Export Modal -->
<div id="exportModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Exported Data</h2>
            <span class="modal-close">&times;</span>
        </div>
        <div class="modal-body">
            <textarea id="exportData" rows="15" cols="50"></textarea>
        </div>
        <div class="modal-footer">
            <button onclick="copyExportData()">Copy to Clipboard</button>
            <button onclick="closeExportModal()">Close</button>
        </div>
    </div>
</div>

<!-- Layer Name Modal (for Add/Edit) -->
<div id="layerNameModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2 id="layerNameModalTitle">Layer Name</h2>
            <span class="modal-close" onclick="closeLayerNameModal()">&times;</span>
        </div>
        <div class="modal-body">
            <input type="text" id="layerNameInput" placeholder="Enter layer name" style="width: 100%; padding: 10px; font-size: 14px; border: 1px solid #555; border-radius: 4px; background-color: #1a1a1a; color: #e0e0e0; box-sizing: border-box;">
            <div id="layerNameError" style="color: #ff6b6b; margin-top: 10px; display: none;"></div>
        </div>
        <div class="modal-footer">
            <button onclick="confirmLayerName()">OK</button>
            <button onclick="closeLayerNameModal()">Cancel</button>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteConfirmModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2>Delete Layer</h2>
            <span class="modal-close" onclick="closeDeleteConfirmModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p style="color: #e0e0e0; margin: 0;">Are you sure you want to delete this layer? This will remove all polygons and points in this layer.</p>
        </div>
        <div class="modal-footer">
            <button onclick="confirmDeleteLayer()" style="background-color: #d32f2f;">Delete</button>
            <button onclick="closeDeleteConfirmModal()">Cancel</button>
        </div>
    </div>
</div>

<!-- Alert/Info Modal -->
<div id="alertModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2 id="alertModalTitle">Information</h2>
            <span class="modal-close" onclick="closeAlertModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p id="alertModalMessage" style="color: #e0e0e0; margin: 0;"></p>
        </div>
        <div class="modal-footer">
            <button onclick="closeAlertModal()">OK</button>
        </div>
    </div>
</div>

<!-- Properties Modal -->
<div id="propertiesModal" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2>Layer Properties</h2>
            <span class="modal-close" onclick="closePropertiesModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">Name</label>
                <input type="text" class="form-input" id="propertiesName" placeholder="Layer Name">
            </div>
            <div class="form-group">
                <label class="form-label">Speed Limit</label>
                <input type="text" class="form-input" id="propertiesSpeed" placeholder="Speed Limit">
            </div>
            <div id="propertiesError" style="color: #ff6b6b; margin-top: 10px; display: none;"></div>
        </div>
        <div class="modal-footer">
            <button onclick="saveProperties()">Save</button>
            <button onclick="closePropertiesModal()">Cancel</button>
        </div>
    </div>
</div>

<div class="mouse_helper"></div>

<!-- Yandex.Metrika counter -->
<script type="text/javascript"> (function (d, w, c) {
    (w[c] = w[c] || []).push(function () {
        try {
            w.yaCounter24504719 = new Ya.Metrika({
                id: 24504719,
                clickmap: true,
                trackLinks: true,
                accurateTrackBounce: true,
                webvisor: true,
                trackHash: true
            });
        } catch (e) {
        }
    });
    var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () {
        n.parentNode.insertBefore(s, n);
    };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://mc.yandex.ru/metrika/watch.js";
    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else {
        f();
    }
})(document, window, "yandex_metrika_callbacks"); </script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/24504719" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript> <!-- /Yandex.Metrika counter -->

<div class="mouse_helper"></div>
<div class="edit-mode-badge" id="editModeBadge">Add</div>

</body>

</html>
